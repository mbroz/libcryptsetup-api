<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>cryptsetup API: LUKS2 token wrapper access</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">cryptsetup API
   </div>
   <div id="projectbrief">Public cryptsetup API</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">LUKS2 token wrapper access</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcrypt__token__params__luks2__keyring.html">crypt_token_params_luks2_keyring</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcrypt__token__handler.html">crypt_token_handler</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gae685ce9c5d5cf8bb4d5e4ce691182858"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#gae685ce9c5d5cf8bb4d5e4ce691182858">CRYPT_ANY_TOKEN</a>&#160;&#160;&#160;-1</td></tr>
<tr class="separator:gae685ce9c5d5cf8bb4d5e4ce691182858"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga46a35c659cd555d09737f7fc31c6d7d2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#ga46a35c659cd555d09737f7fc31c6d7d2">CRYPT_TOKEN_ABI_VERSION1</a>&#160;&#160;&#160;&quot;CRYPTSETUP_TOKEN_1.0&quot;</td></tr>
<tr class="separator:ga46a35c659cd555d09737f7fc31c6d7d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2f01a48d2f9a997c0b61023912017bb8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#ga2f01a48d2f9a997c0b61023912017bb8">CRYPT_TOKEN_ABI_OPEN</a>&#160;&#160;&#160;&quot;cryptsetup_token_open&quot;</td></tr>
<tr class="separator:ga2f01a48d2f9a997c0b61023912017bb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1761b45c8a3b2daa8690875a4f8b000f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#ga1761b45c8a3b2daa8690875a4f8b000f">CRYPT_TOKEN_ABI_OPEN_PIN</a>&#160;&#160;&#160;&quot;cryptsetup_token_open_pin&quot;</td></tr>
<tr class="separator:ga1761b45c8a3b2daa8690875a4f8b000f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9e50aeac4888f3c1aaf67579ae1d36e2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#ga9e50aeac4888f3c1aaf67579ae1d36e2">CRYPT_TOKEN_ABI_BUFFER_FREE</a>&#160;&#160;&#160;&quot;cryptsetup_token_buffer_free&quot;</td></tr>
<tr class="separator:ga9e50aeac4888f3c1aaf67579ae1d36e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadca3c832b63746ea25309f5c9e8e4a34"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#gadca3c832b63746ea25309f5c9e8e4a34">CRYPT_TOKEN_ABI_VALIDATE</a>&#160;&#160;&#160;&quot;cryptsetup_token_validate&quot;</td></tr>
<tr class="separator:gadca3c832b63746ea25309f5c9e8e4a34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0a0280c8e44d1f34e3e106e0444b012d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#ga0a0280c8e44d1f34e3e106e0444b012d">CRYPT_TOKEN_ABI_DUMP</a>&#160;&#160;&#160;&quot;cryptsetup_token_dump&quot;</td></tr>
<tr class="separator:ga0a0280c8e44d1f34e3e106e0444b012d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga642cc647414a6c19d7b2c125701e9692"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#ga642cc647414a6c19d7b2c125701e9692">CRYPT_TOKEN_ABI_VERSION</a>&#160;&#160;&#160;&quot;cryptsetup_token_version&quot;</td></tr>
<tr class="separator:ga642cc647414a6c19d7b2c125701e9692"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga0b4513d049ab72ec5fe4087e905d36d5"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#ga0b4513d049ab72ec5fe4087e905d36d5">crypt_token_open_func</a>) (struct crypt_device *cd, int token, char **buffer, size_t *buffer_len, void *usrptr)</td></tr>
<tr class="separator:ga0b4513d049ab72ec5fe4087e905d36d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac349c74486bc6e06b927cf2bd8334582"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#gac349c74486bc6e06b927cf2bd8334582">crypt_token_open_pin_func</a>) (struct crypt_device *cd, int token, const char *pin, size_t pin_size, char **buffer, size_t *buffer_len, void *usrptr)</td></tr>
<tr class="separator:gac349c74486bc6e06b927cf2bd8334582"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae6a1e6651ba42cfc26a4156b62105e7a"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#gae6a1e6651ba42cfc26a4156b62105e7a">crypt_token_buffer_free_func</a>) (void *buffer, size_t buffer_len)</td></tr>
<tr class="separator:gae6a1e6651ba42cfc26a4156b62105e7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacd30ff65c13394f91381947e6f4ca5dc"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#gacd30ff65c13394f91381947e6f4ca5dc">crypt_token_validate_func</a>) (struct crypt_device *cd, const char *json)</td></tr>
<tr class="separator:gacd30ff65c13394f91381947e6f4ca5dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2775b1e018fe9debed9528a294727805"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#ga2775b1e018fe9debed9528a294727805">crypt_token_dump_func</a>) (struct crypt_device *cd, const char *json)</td></tr>
<tr class="separator:ga2775b1e018fe9debed9528a294727805"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6d6e4b207bb0e32638a3fc5e1695711f"><td class="memItemLeft" align="right" valign="top">typedef const char *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#ga6d6e4b207bb0e32638a3fc5e1695711f">crypt_token_version_func</a>) (void)</td></tr>
<tr class="separator:ga6d6e4b207bb0e32638a3fc5e1695711f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gaa2e0838edfc9c455930846d2a544e832"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#gaa2e0838edfc9c455930846d2a544e832">crypt_token_info</a> { <br />
&#160;&#160;<a class="el" href="group__crypt-tokens.html#ggaa2e0838edfc9c455930846d2a544e832afbcc9aa96dcb654b952d486af2295d9c">CRYPT_TOKEN_INVALID</a>
, <a class="el" href="group__crypt-tokens.html#ggaa2e0838edfc9c455930846d2a544e832a85cde763f23c00ad5128d298b5f38bbc">CRYPT_TOKEN_INACTIVE</a>
, <a class="el" href="group__crypt-tokens.html#ggaa2e0838edfc9c455930846d2a544e832aa0271a1841da33b73922134dfa0a9ac9">CRYPT_TOKEN_INTERNAL</a>
, <a class="el" href="group__crypt-tokens.html#ggaa2e0838edfc9c455930846d2a544e832a016cc2f566977150cd36649f2a117396">CRYPT_TOKEN_INTERNAL_UNKNOWN</a>
, <br />
&#160;&#160;<a class="el" href="group__crypt-tokens.html#ggaa2e0838edfc9c455930846d2a544e832a6b61558bd86a6400e758dc9ae7b57e39">CRYPT_TOKEN_EXTERNAL</a>
, <a class="el" href="group__crypt-tokens.html#ggaa2e0838edfc9c455930846d2a544e832a45ac2bf6f5e30a37aaa9bb3ff3188afe">CRYPT_TOKEN_EXTERNAL_UNKNOWN</a>
<br />
 }</td></tr>
<tr class="separator:gaa2e0838edfc9c455930846d2a544e832"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gabe0c1d6add920be98b29d908ea4aeeac"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#gabe0c1d6add920be98b29d908ea4aeeac">crypt_token_max</a> (const char *type)</td></tr>
<tr class="separator:gabe0c1d6add920be98b29d908ea4aeeac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadcc2116c40c3bb5a01a7f51d2998423e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#gadcc2116c40c3bb5a01a7f51d2998423e">crypt_token_json_get</a> (struct crypt_device *cd, int token, const char **json)</td></tr>
<tr class="separator:gadcc2116c40c3bb5a01a7f51d2998423e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7c0e99a62773fc6fc0b72f4563b479a4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#ga7c0e99a62773fc6fc0b72f4563b479a4">crypt_token_json_set</a> (struct crypt_device *cd, int token, const char *json)</td></tr>
<tr class="separator:ga7c0e99a62773fc6fc0b72f4563b479a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac6ded162c0b9c5f87c8628799a279fe7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__crypt-tokens.html#gaa2e0838edfc9c455930846d2a544e832">crypt_token_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#gac6ded162c0b9c5f87c8628799a279fe7">crypt_token_status</a> (struct crypt_device *cd, int token, const char **type)</td></tr>
<tr class="separator:gac6ded162c0b9c5f87c8628799a279fe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2936b9909b5e04fc1b567d822c8c2318"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#ga2936b9909b5e04fc1b567d822c8c2318">crypt_token_luks2_keyring_set</a> (struct crypt_device *cd, int token, const struct <a class="el" href="structcrypt__token__params__luks2__keyring.html">crypt_token_params_luks2_keyring</a> *params)</td></tr>
<tr class="separator:ga2936b9909b5e04fc1b567d822c8c2318"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8d483366a90204e7578f0768d2ce6146"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#ga8d483366a90204e7578f0768d2ce6146">crypt_token_luks2_keyring_get</a> (struct crypt_device *cd, int token, struct <a class="el" href="structcrypt__token__params__luks2__keyring.html">crypt_token_params_luks2_keyring</a> *params)</td></tr>
<tr class="separator:ga8d483366a90204e7578f0768d2ce6146"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2026a5c630b46648a539d7f9b144a540"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#ga2026a5c630b46648a539d7f9b144a540">crypt_token_assign_keyslot</a> (struct crypt_device *cd, int token, int keyslot)</td></tr>
<tr class="separator:ga2026a5c630b46648a539d7f9b144a540"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab123dd3fb50efaef3d2fcdc416a69894"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#gab123dd3fb50efaef3d2fcdc416a69894">crypt_token_unassign_keyslot</a> (struct crypt_device *cd, int token, int keyslot)</td></tr>
<tr class="separator:gab123dd3fb50efaef3d2fcdc416a69894"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaca8399f855f3661b58a803a01c3d382e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#gaca8399f855f3661b58a803a01c3d382e">crypt_token_is_assigned</a> (struct crypt_device *cd, int token, int keyslot)</td></tr>
<tr class="separator:gaca8399f855f3661b58a803a01c3d382e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabcb5bcfb0fc4a0886a81ccfcbfdb63e6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#gabcb5bcfb0fc4a0886a81ccfcbfdb63e6">crypt_token_register</a> (const <a class="el" href="structcrypt__token__handler.html">crypt_token_handler</a> *handler)</td></tr>
<tr class="separator:gabcb5bcfb0fc4a0886a81ccfcbfdb63e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga23d576ca2a69db2947935102710435df"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#ga23d576ca2a69db2947935102710435df">crypt_token_external_path</a> (void)</td></tr>
<tr class="separator:ga23d576ca2a69db2947935102710435df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6f9c8b1d0d680bb948575bd7dc5e6da9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#ga6f9c8b1d0d680bb948575bd7dc5e6da9">crypt_token_external_disable</a> (void)</td></tr>
<tr class="separator:ga6f9c8b1d0d680bb948575bd7dc5e6da9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf6b9bbca3dd72cf7918e3e0a7063a28f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#gaf6b9bbca3dd72cf7918e3e0a7063a28f">crypt_activate_by_token</a> (struct crypt_device *cd, const char *name, int token, void *usrptr, uint32_t flags)</td></tr>
<tr class="separator:gaf6b9bbca3dd72cf7918e3e0a7063a28f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae31656c0a5f33044bf05b9d628c54e55"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-tokens.html#gae31656c0a5f33044bf05b9d628c54e55">crypt_activate_by_token_pin</a> (struct crypt_device *cd, const char *name, const char *type, int token, const char *pin, size_t pin_size, void *usrptr, uint32_t flags)</td></tr>
<tr class="separator:gae31656c0a5f33044bf05b9d628c54e55"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Utilities for handling tokens LUKS2 Token is a device or a method how to read password for particular keyslot automatically. It can be chunk of data stored on hardware token or just a metadata how to generate the password. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gae685ce9c5d5cf8bb4d5e4ce691182858"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae685ce9c5d5cf8bb4d5e4ce691182858">&#9670;&nbsp;</a></span>CRYPT_ANY_TOKEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CRYPT_ANY_TOKEN&#160;&#160;&#160;-1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Iterate through all tokens </p>

</div>
</div>
<a id="ga9e50aeac4888f3c1aaf67579ae1d36e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9e50aeac4888f3c1aaf67579ae1d36e2">&#9670;&nbsp;</a></span>CRYPT_TOKEN_ABI_BUFFER_FREE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CRYPT_TOKEN_ABI_BUFFER_FREE&#160;&#160;&#160;&quot;cryptsetup_token_buffer_free&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>deallocate callback - ABI exported symbol for external token </p>

</div>
</div>
<a id="ga0a0280c8e44d1f34e3e106e0444b012d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0a0280c8e44d1f34e3e106e0444b012d">&#9670;&nbsp;</a></span>CRYPT_TOKEN_ABI_DUMP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CRYPT_TOKEN_ABI_DUMP&#160;&#160;&#160;&quot;cryptsetup_token_dump&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>dump token metadata - ABI exported symbol for external token </p>

</div>
</div>
<a id="ga2f01a48d2f9a997c0b61023912017bb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2f01a48d2f9a997c0b61023912017bb8">&#9670;&nbsp;</a></span>CRYPT_TOKEN_ABI_OPEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CRYPT_TOKEN_ABI_OPEN&#160;&#160;&#160;&quot;cryptsetup_token_open&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>open by token - ABI exported symbol for external token (mandatory) </p>

</div>
</div>
<a id="ga1761b45c8a3b2daa8690875a4f8b000f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1761b45c8a3b2daa8690875a4f8b000f">&#9670;&nbsp;</a></span>CRYPT_TOKEN_ABI_OPEN_PIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CRYPT_TOKEN_ABI_OPEN_PIN&#160;&#160;&#160;&quot;cryptsetup_token_open_pin&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>open by token with PIN - ABI exported symbol for external token </p>

</div>
</div>
<a id="gadca3c832b63746ea25309f5c9e8e4a34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadca3c832b63746ea25309f5c9e8e4a34">&#9670;&nbsp;</a></span>CRYPT_TOKEN_ABI_VALIDATE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CRYPT_TOKEN_ABI_VALIDATE&#160;&#160;&#160;&quot;cryptsetup_token_validate&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>validate token metadata - ABI exported symbol for external token </p>

</div>
</div>
<a id="ga642cc647414a6c19d7b2c125701e9692"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga642cc647414a6c19d7b2c125701e9692">&#9670;&nbsp;</a></span>CRYPT_TOKEN_ABI_VERSION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CRYPT_TOKEN_ABI_VERSION&#160;&#160;&#160;&quot;cryptsetup_token_version&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>token version - ABI exported symbol for external token </p>

</div>
</div>
<a id="ga46a35c659cd555d09737f7fc31c6d7d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga46a35c659cd555d09737f7fc31c6d7d2">&#9670;&nbsp;</a></span>CRYPT_TOKEN_ABI_VERSION1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CRYPT_TOKEN_ABI_VERSION1&#160;&#160;&#160;&quot;CRYPTSETUP_TOKEN_1.0&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ABI version for external token in libcryptsetup-token-[name].so </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gae6a1e6651ba42cfc26a4156b62105e7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae6a1e6651ba42cfc26a4156b62105e7a">&#9670;&nbsp;</a></span>crypt_token_buffer_free_func</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* crypt_token_buffer_free_func) (void *buffer, size_t buffer_len)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Token handler buffer free function prototype. This function is used by library to free the buffer with keyslot passphrase when it's no longer needed. If not defined the library overwrites buffer with zeroes and call free().</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>the buffer with keyslot passphrase </td></tr>
    <tr><td class="paramname">buffer_len</td><td>the buffer length </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga2775b1e018fe9debed9528a294727805"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2775b1e018fe9debed9528a294727805">&#9670;&nbsp;</a></span>crypt_token_dump_func</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* crypt_token_dump_func) (struct crypt_device *cd, const char *json)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Token handler dump function prototype. This function is supposed to print token implementation specific details. It gets called during <a class="el" href="group__crypt-devstat.html#ga14154e6c977a063e19864f38a61ce8c5">crypt_dump</a> if token handler was registered before.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">json</td><td>buffer with token JSON</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>dump implementations are advised to use <a class="el" href="group__crypt-log.html#gae1be6352b44d3ee9e61c1638ceb6347d">crypt_log</a> function to dump token details. </dd></dl>

</div>
</div>
<a id="ga0b4513d049ab72ec5fe4087e905d36d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0b4513d049ab72ec5fe4087e905d36d5">&#9670;&nbsp;</a></span>crypt_token_open_func</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* crypt_token_open_func) (struct crypt_device *cd, int token, char **buffer, size_t *buffer_len, void *usrptr)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Token handler open function prototype. This function retrieves password from a token and return allocated buffer containing this password. This buffer has to be deallocated by calling free() function and content should be wiped before deallocation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">token</td><td>token id </td></tr>
    <tr><td class="paramname">buffer</td><td>returned allocated buffer with password </td></tr>
    <tr><td class="paramname">buffer_len</td><td>length of the buffer </td></tr>
    <tr><td class="paramname">usrptr</td><td>user data in <a class="el" href="group__crypt-tokens.html#gaf6b9bbca3dd72cf7918e3e0a7063a28f">crypt_activate_by_token</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success (token passed LUKS2 keyslot passphrase in buffer) or negative errno otherwise.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Negative ENOANO errno means that token is PIN protected and caller should use <a class="el" href="group__crypt-tokens.html#gae31656c0a5f33044bf05b9d628c54e55">crypt_activate_by_token_pin</a> with PIN provided.</dd>
<dd>
Negative EAGAIN errno means token handler requires additional hardware not present in the system. </dd></dl>

</div>
</div>
<a id="gac349c74486bc6e06b927cf2bd8334582"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac349c74486bc6e06b927cf2bd8334582">&#9670;&nbsp;</a></span>crypt_token_open_pin_func</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* crypt_token_open_pin_func) (struct crypt_device *cd, int token, const char *pin, size_t pin_size, char **buffer, size_t *buffer_len, void *usrptr)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Token handler open with passphrase/PIN function prototype. This function retrieves password from a token and return allocated buffer containing this password. This buffer has to be deallocated by calling free() function and content should be wiped before deallocation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">token</td><td>token id </td></tr>
    <tr><td class="paramname">pin</td><td>passphrase (or PIN) to unlock token (may be binary data) </td></tr>
    <tr><td class="paramname">pin_size</td><td>size of <em>pin</em> </td></tr>
    <tr><td class="paramname">buffer</td><td>returned allocated buffer with password </td></tr>
    <tr><td class="paramname">buffer_len</td><td>length of the buffer </td></tr>
    <tr><td class="paramname">usrptr</td><td>user data in <a class="el" href="group__crypt-tokens.html#gaf6b9bbca3dd72cf7918e3e0a7063a28f">crypt_activate_by_token</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success (token passed LUKS2 keyslot passphrase in buffer) or negative errno otherwise.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Negative ENOANO errno means that token is PIN protected and PIN was missing or wrong.</dd>
<dd>
Negative EAGAIN errno means token handler requires additional hardware not present in the system. </dd></dl>

</div>
</div>
<a id="gacd30ff65c13394f91381947e6f4ca5dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacd30ff65c13394f91381947e6f4ca5dc">&#9670;&nbsp;</a></span>crypt_token_validate_func</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* crypt_token_validate_func) (struct crypt_device *cd, const char *json)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Token handler validate function prototype. This function validates JSON representation of user defined token for additional data specific for its token type. If defined in the handler, it's called during <a class="el" href="group__crypt-tokens.html#gaf6b9bbca3dd72cf7918e3e0a7063a28f">crypt_activate_by_token</a>. It may also be called during <a class="el" href="group__crypt-tokens.html#ga7c0e99a62773fc6fc0b72f4563b479a4">crypt_token_json_set</a> when appropriate token handler was registered before with <a class="el" href="group__crypt-tokens.html#gabcb5bcfb0fc4a0886a81ccfcbfdb63e6">crypt_token_register</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">json</td><td>buffer with JSON </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga6d6e4b207bb0e32638a3fc5e1695711f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6d6e4b207bb0e32638a3fc5e1695711f">&#9670;&nbsp;</a></span>crypt_token_version_func</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef const char*(* crypt_token_version_func) (void)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Token handler version function prototype. This function is supposed to return pointer to version string information.</p>
<dl class="section note"><dt>Note</dt><dd>The returned string is advised to contain only version. For example '1.0.0' or 'v1.2.3.4'. </dd></dl>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gaa2e0838edfc9c455930846d2a544e832"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa2e0838edfc9c455930846d2a544e832">&#9670;&nbsp;</a></span>crypt_token_info</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__crypt-tokens.html#gaa2e0838edfc9c455930846d2a544e832">crypt_token_info</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Token info </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggaa2e0838edfc9c455930846d2a544e832afbcc9aa96dcb654b952d486af2295d9c"></a>CRYPT_TOKEN_INVALID&#160;</td><td class="fielddoc"><p>token is invalid </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaa2e0838edfc9c455930846d2a544e832a85cde763f23c00ad5128d298b5f38bbc"></a>CRYPT_TOKEN_INACTIVE&#160;</td><td class="fielddoc"><p>token is empty (free) </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaa2e0838edfc9c455930846d2a544e832aa0271a1841da33b73922134dfa0a9ac9"></a>CRYPT_TOKEN_INTERNAL&#160;</td><td class="fielddoc"><p>active internal token with driver </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaa2e0838edfc9c455930846d2a544e832a016cc2f566977150cd36649f2a117396"></a>CRYPT_TOKEN_INTERNAL_UNKNOWN&#160;</td><td class="fielddoc"><p>active internal token (reserved name) with missing token driver </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaa2e0838edfc9c455930846d2a544e832a6b61558bd86a6400e758dc9ae7b57e39"></a>CRYPT_TOKEN_EXTERNAL&#160;</td><td class="fielddoc"><p>active external (user defined) token with driver </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaa2e0838edfc9c455930846d2a544e832a45ac2bf6f5e30a37aaa9bb3ff3188afe"></a>CRYPT_TOKEN_EXTERNAL_UNKNOWN&#160;</td><td class="fielddoc"><p>active external (user defined) token with missing token driver </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaf6b9bbca3dd72cf7918e3e0a7063a28f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf6b9bbca3dd72cf7918e3e0a7063a28f">&#9670;&nbsp;</a></span>crypt_activate_by_token()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crypt_activate_by_token </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>usrptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Activate device or check key using a token.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">name</td><td>name of device to create, if <em>NULL</em> only check token </td></tr>
    <tr><td class="paramname">token</td><td>requested token to check or CRYPT_ANY_TOKEN to check all </td></tr>
    <tr><td class="paramname">usrptr</td><td>provided identification in callback </td></tr>
    <tr><td class="paramname">flags</td><td>activation flags</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>unlocked key slot number or negative errno otherwise.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>EPERM errno means token provided passphrase successfully, but passphrase did not unlock any keyslot associated with the token.</dd>
<dd>
ENOENT errno means no token (or subsequently assigned keyslot) was eligible to unlock device.</dd>
<dd>
ENOANO errno means that token is PIN protected and you should call <a class="el" href="group__crypt-tokens.html#gae31656c0a5f33044bf05b9d628c54e55">crypt_activate_by_token_pin</a> with PIN</dd>
<dd>
Negative EAGAIN errno means token handler requires additional hardware not present in the system.</dd>
<dd>
with <em>token</em> set to CRYPT_ANY_TOKEN libcryptsetup runs best effort loop to unlock device using any available token. It may happen that various token handlers return different error codes. At the end loop returns error codes in the following order (from the most significant to the least) any negative errno except those listed below, non negative token id (success), -ENOANO, -EAGAIN, -EPERM, -ENOENT. </dd></dl>

</div>
</div>
<a id="gae31656c0a5f33044bf05b9d628c54e55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae31656c0a5f33044bf05b9d628c54e55">&#9670;&nbsp;</a></span>crypt_activate_by_token_pin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crypt_activate_by_token_pin </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>pin_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>usrptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Activate device or check key using a token with PIN.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">name</td><td>name of device to create, if <em>NULL</em> only check token </td></tr>
    <tr><td class="paramname">type</td><td>restrict type of token, if <em>NULL</em> all types are allowed </td></tr>
    <tr><td class="paramname">token</td><td>requested token to check or CRYPT_ANY_TOKEN to check all </td></tr>
    <tr><td class="paramname">pin</td><td>passphrase (or PIN) to unlock token (may be binary data) </td></tr>
    <tr><td class="paramname">pin_size</td><td>size of <em>pin</em> </td></tr>
    <tr><td class="paramname">usrptr</td><td>provided identification in callback </td></tr>
    <tr><td class="paramname">flags</td><td>activation flags</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>unlocked key slot number or negative errno otherwise.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>EPERM errno means token provided passphrase successfully, but passphrase did not unlock any keyslot associated with the token.</dd>
<dd>
ENOENT errno means no token (or subsequently assigned keyslot) was eligible to unlock device.</dd>
<dd>
ENOANO errno means that token is PIN protected and was either missing (NULL) or wrong.</dd>
<dd>
Negative EAGAIN errno means token handler requires additional hardware not present in the system.</dd>
<dd>
with <em>token</em> set to CRYPT_ANY_TOKEN libcryptsetup runs best effort loop to unlock device using any available token. It may happen that various token handlers return different error codes. At the end loop returns error codes in the following order (from the most significant to the least) any negative errno except those listed below, non negative token id (success), -ENOANO, -EAGAIN, -EPERM, -ENOENT. </dd></dl>

</div>
</div>
<a id="ga2026a5c630b46648a539d7f9b144a540"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2026a5c630b46648a539d7f9b144a540">&#9670;&nbsp;</a></span>crypt_token_assign_keyslot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crypt_token_assign_keyslot </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keyslot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Assign a token to particular keyslot. (There can be more keyslots assigned to one token id.)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">token</td><td>token id </td></tr>
    <tr><td class="paramname">keyslot</td><td>keyslot to be assigned to token (CRYPT_ANY SLOT assigns all active keyslots to token)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>allocated token id or negative errno otherwise. </dd></dl>

</div>
</div>
<a id="ga6f9c8b1d0d680bb948575bd7dc5e6da9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6f9c8b1d0d680bb948575bd7dc5e6da9">&#9670;&nbsp;</a></span>crypt_token_external_disable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void crypt_token_external_disable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Disable external token handlers (plugins) support If disabled, it cannot be enabled again. </p>

</div>
</div>
<a id="ga23d576ca2a69db2947935102710435df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga23d576ca2a69db2947935102710435df">&#9670;&nbsp;</a></span>crypt_token_external_path()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* crypt_token_external_path </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Report configured path where library searches for external token handlers</p>
<dl class="section return"><dt>Returns</dt><dd><em>absolute</em> path when external tokens are enabled or <em>NULL</em> otherwise. </dd></dl>

</div>
</div>
<a id="gaca8399f855f3661b58a803a01c3d382e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaca8399f855f3661b58a803a01c3d382e">&#9670;&nbsp;</a></span>crypt_token_is_assigned()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crypt_token_is_assigned </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keyslot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get info about token assignment to particular keyslot.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">token</td><td>token id </td></tr>
    <tr><td class="paramname">keyslot</td><td>keyslot</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success (token exists and is assigned to the keyslot), -ENOENT if token is not assigned to a keyslot (token, keyslot or both may be inactive) or other negative errno otherwise. </dd></dl>

</div>
</div>
<a id="gadcc2116c40c3bb5a01a7f51d2998423e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadcc2116c40c3bb5a01a7f51d2998423e">&#9670;&nbsp;</a></span>crypt_token_json_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crypt_token_json_get </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>json</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get content of a token definition in JSON format.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">token</td><td>token id </td></tr>
    <tr><td class="paramname">json</td><td>buffer with JSON</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>allocated token id or negative errno otherwise. </dd></dl>

</div>
</div>
<a id="ga7c0e99a62773fc6fc0b72f4563b479a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7c0e99a62773fc6fc0b72f4563b479a4">&#9670;&nbsp;</a></span>crypt_token_json_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crypt_token_json_set </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>json</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Store content of a token definition in JSON format.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">token</td><td>token id or <em>CRYPT_ANY_TOKEN</em> to allocate new one </td></tr>
    <tr><td class="paramname">json</td><td>buffer with JSON or <em>NULL</em> to remove token</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>allocated token id or negative errno otherwise.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The buffer must be in proper JSON format and must contain at least string "type" with slot type and an array of string names "keyslots". Keyslots array contains assignments to particular slots and can be empty. </dd></dl>

</div>
</div>
<a id="ga8d483366a90204e7578f0768d2ce6146"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8d483366a90204e7578f0768d2ce6146">&#9670;&nbsp;</a></span>crypt_token_luks2_keyring_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crypt_token_luks2_keyring_get </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcrypt__token__params__luks2__keyring.html">crypt_token_params_luks2_keyring</a> *&#160;</td>
          <td class="paramname"><em>params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get LUKS2 keyring token params</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">token</td><td>existing luks2 keyring token id </td></tr>
    <tr><td class="paramname">params</td><td>returned luks2 keyring token params</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>allocated token id or negative errno otherwise.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>do not call free() on params members. Members are valid only until next libcryptsetup function is called. </dd></dl>

</div>
</div>
<a id="ga2936b9909b5e04fc1b567d822c8c2318"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2936b9909b5e04fc1b567d822c8c2318">&#9670;&nbsp;</a></span>crypt_token_luks2_keyring_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crypt_token_luks2_keyring_set </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structcrypt__token__params__luks2__keyring.html">crypt_token_params_luks2_keyring</a> *&#160;</td>
          <td class="paramname"><em>params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a new luks2 keyring token.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">token</td><td>token id or <em>CRYPT_ANY_TOKEN</em> to allocate new one </td></tr>
    <tr><td class="paramname">params</td><td>luks2 keyring token params</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>allocated token id or negative errno otherwise. </dd></dl>

</div>
</div>
<a id="gabe0c1d6add920be98b29d908ea4aeeac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabe0c1d6add920be98b29d908ea4aeeac">&#9670;&nbsp;</a></span>crypt_token_max()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crypt_token_max </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get number of tokens supported for device type.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>crypt device type</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>token count or negative errno otherwise if device doesn't not support tokens.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Real number of supported tokens for a particular device depends on usable metadata area size. </dd></dl>

</div>
</div>
<a id="gabcb5bcfb0fc4a0886a81ccfcbfdb63e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabcb5bcfb0fc4a0886a81ccfcbfdb63e6">&#9670;&nbsp;</a></span>crypt_token_register()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crypt_token_register </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcrypt__token__handler.html">crypt_token_handler</a> *&#160;</td>
          <td class="paramname"><em>handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Register token handler</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handler</td><td>token handler to register</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><em>0</em> on success or negative errno value otherwise. </dd></dl>

</div>
</div>
<a id="gac6ded162c0b9c5f87c8628799a279fe7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac6ded162c0b9c5f87c8628799a279fe7">&#9670;&nbsp;</a></span>crypt_token_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__crypt-tokens.html#gaa2e0838edfc9c455930846d2a544e832">crypt_token_info</a> crypt_token_status </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get info for specific token.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">token</td><td>existing token id </td></tr>
    <tr><td class="paramname">type</td><td>pointer for returned type string</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>token status info. For any returned status (besides CRYPT_TOKEN_INVALID and CRYPT_TOKEN_INACTIVE) and if type parameter is not NULL it will contain address of type string.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>if required, create a copy of string referenced in *type before calling next libcryptsetup API function. The reference may become invalid. </dd></dl>

</div>
</div>
<a id="gab123dd3fb50efaef3d2fcdc416a69894"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab123dd3fb50efaef3d2fcdc416a69894">&#9670;&nbsp;</a></span>crypt_token_unassign_keyslot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crypt_token_unassign_keyslot </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keyslot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unassign a token from particular keyslot. (There can be more keyslots assigned to one token id.)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">token</td><td>token id </td></tr>
    <tr><td class="paramname">keyslot</td><td>keyslot to be unassigned from token (CRYPT_ANY SLOT unassigns all active keyslots from token)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>allocated token id or negative errno otherwise. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 24 2022 15:30:42 for cryptsetup API by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
