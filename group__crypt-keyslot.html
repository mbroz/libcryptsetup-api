<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>cryptsetup API: LUKS keyslots</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">cryptsetup API
   </div>
   <div id="projectbrief">Public cryptsetup API</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">LUKS keyslots</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga2efb82bfa83f67465f1a48b5088b1560"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-keyslot.html#ga2efb82bfa83f67465f1a48b5088b1560">CRYPT_ANY_SLOT</a>&#160;&#160;&#160;-1</td></tr>
<tr class="separator:ga2efb82bfa83f67465f1a48b5088b1560"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8c5e6489cab9b08f6154180b92942cd2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-keyslot.html#ga8c5e6489cab9b08f6154180b92942cd2">CRYPT_VOLUME_KEY_NO_SEGMENT</a>&#160;&#160;&#160;(1 &lt;&lt; 0)</td></tr>
<tr class="separator:ga8c5e6489cab9b08f6154180b92942cd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa61ba423c776f46fb1b3c781aa0ca894"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-keyslot.html#gaa61ba423c776f46fb1b3c781aa0ca894">CRYPT_VOLUME_KEY_SET</a>&#160;&#160;&#160;(1 &lt;&lt; 1)</td></tr>
<tr class="separator:gaa61ba423c776f46fb1b3c781aa0ca894"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8853fa1fb03acb704a54c25d3c5d39ac"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-keyslot.html#ga8853fa1fb03acb704a54c25d3c5d39ac">CRYPT_VOLUME_KEY_DIGEST_REUSE</a>&#160;&#160;&#160;(1 &lt;&lt; 2)</td></tr>
<tr class="separator:ga8853fa1fb03acb704a54c25d3c5d39ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga221981be3313db52394e109791712413"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-keyslot.html#ga221981be3313db52394e109791712413">crypt_keyslot_info</a> { <br />
&#160;&#160;<a class="el" href="group__crypt-keyslot.html#gga221981be3313db52394e109791712413ad5ace06fec9367dca16135ee26530139">CRYPT_SLOT_INVALID</a>
, <a class="el" href="group__crypt-keyslot.html#gga221981be3313db52394e109791712413a69fe7a1c99821e443b5ac6fc57951a49">CRYPT_SLOT_INACTIVE</a>
, <a class="el" href="group__crypt-keyslot.html#gga221981be3313db52394e109791712413a8539174069296cf91fa426cc39fea46d">CRYPT_SLOT_ACTIVE</a>
, <a class="el" href="group__crypt-keyslot.html#gga221981be3313db52394e109791712413a5e3cdf58ddae0ae6c3bb4a2b922c10e9">CRYPT_SLOT_ACTIVE_LAST</a>
, <br />
&#160;&#160;<a class="el" href="group__crypt-keyslot.html#gga221981be3313db52394e109791712413a13081257f1e3d7e7d4d69ff69f10fb91">CRYPT_SLOT_UNBOUND</a>
<br />
 }</td></tr>
<tr class="separator:ga221981be3313db52394e109791712413"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4120ee621158e2a71b35bb7abb4c04f4"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-keyslot.html#ga4120ee621158e2a71b35bb7abb4c04f4">crypt_keyslot_priority</a> { <a class="el" href="group__crypt-keyslot.html#gga4120ee621158e2a71b35bb7abb4c04f4a4824d952fe22cb16af5381009f8f8be3">CRYPT_SLOT_PRIORITY_INVALID</a> =-1
, <a class="el" href="group__crypt-keyslot.html#gga4120ee621158e2a71b35bb7abb4c04f4a42f21b0055f07f2b99be2a35ffd4d5e2">CRYPT_SLOT_PRIORITY_IGNORE</a> = 0
, <a class="el" href="group__crypt-keyslot.html#gga4120ee621158e2a71b35bb7abb4c04f4a83396ec0775fd14196643dd10f84e9cc">CRYPT_SLOT_PRIORITY_NORMAL</a> = 1
, <a class="el" href="group__crypt-keyslot.html#gga4120ee621158e2a71b35bb7abb4c04f4aa0eae88058df5bfcfa39fcd0adf0e970">CRYPT_SLOT_PRIORITY_PREFER</a> = 2
 }</td></tr>
<tr class="separator:ga4120ee621158e2a71b35bb7abb4c04f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga50fd2497a256706db7a37f77b22e1ced"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-keyslot.html#ga50fd2497a256706db7a37f77b22e1ced">crypt_keyslot_add_by_passphrase</a> (struct crypt_device *cd, int keyslot, const char *passphrase, size_t passphrase_size, const char *new_passphrase, size_t new_passphrase_size)</td></tr>
<tr class="separator:ga50fd2497a256706db7a37f77b22e1ced"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5b57536bcdcec670e94cafd6b8a37620"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-keyslot.html#ga5b57536bcdcec670e94cafd6b8a37620">crypt_keyslot_change_by_passphrase</a> (struct crypt_device *cd, int keyslot_old, int keyslot_new, const char *passphrase, size_t passphrase_size, const char *new_passphrase, size_t new_passphrase_size)</td></tr>
<tr class="separator:ga5b57536bcdcec670e94cafd6b8a37620"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga70fe268497c1830d1df9b62ebe0e303a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-keyslot.html#ga70fe268497c1830d1df9b62ebe0e303a">crypt_keyslot_add_by_keyfile_device_offset</a> (struct crypt_device *cd, int keyslot, const char *keyfile, size_t keyfile_size, uint64_t keyfile_offset, const char *new_keyfile, size_t new_keyfile_size, uint64_t new_keyfile_offset)</td></tr>
<tr class="separator:ga70fe268497c1830d1df9b62ebe0e303a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga930412caeb079e9fd763589da4a0b03b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-keyslot.html#ga930412caeb079e9fd763589da4a0b03b">crypt_keyslot_add_by_keyfile_offset</a> (struct crypt_device *cd, int keyslot, const char *keyfile, size_t keyfile_size, size_t keyfile_offset, const char *new_keyfile, size_t new_keyfile_size, size_t new_keyfile_offset)</td></tr>
<tr class="separator:ga930412caeb079e9fd763589da4a0b03b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2dd31f95ddfc441e05543aee59e757ab"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-keyslot.html#ga2dd31f95ddfc441e05543aee59e757ab">crypt_keyslot_add_by_keyfile</a> (struct crypt_device *cd, int keyslot, const char *keyfile, size_t keyfile_size, const char *new_keyfile, size_t new_keyfile_size)</td></tr>
<tr class="separator:ga2dd31f95ddfc441e05543aee59e757ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga93a404f2f6f6e88ccd82b6b02ccb9a84"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-keyslot.html#ga93a404f2f6f6e88ccd82b6b02ccb9a84">crypt_keyslot_add_by_volume_key</a> (struct crypt_device *cd, int keyslot, const char *volume_key, size_t volume_key_size, const char *passphrase, size_t passphrase_size)</td></tr>
<tr class="separator:ga93a404f2f6f6e88ccd82b6b02ccb9a84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7917d5d136c114f6bcb1e26779a68cdf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-keyslot.html#ga7917d5d136c114f6bcb1e26779a68cdf">crypt_keyslot_add_by_key</a> (struct crypt_device *cd, int keyslot, const char *volume_key, size_t volume_key_size, const char *passphrase, size_t passphrase_size, uint32_t flags)</td></tr>
<tr class="separator:ga7917d5d136c114f6bcb1e26779a68cdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga95580f0491cb908e99e00b27cdc67a7b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-keyslot.html#ga95580f0491cb908e99e00b27cdc67a7b">crypt_keyslot_destroy</a> (struct crypt_device *cd, int keyslot)</td></tr>
<tr class="separator:ga95580f0491cb908e99e00b27cdc67a7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae3e04f72fce2f1732628b9c018575ec8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__crypt-keyslot.html#ga221981be3313db52394e109791712413">crypt_keyslot_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-keyslot.html#gae3e04f72fce2f1732628b9c018575ec8">crypt_keyslot_status</a> (struct crypt_device *cd, int keyslot)</td></tr>
<tr class="separator:gae3e04f72fce2f1732628b9c018575ec8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab93f7432ec41bfa47be333a78e505600"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__crypt-keyslot.html#ga4120ee621158e2a71b35bb7abb4c04f4">crypt_keyslot_priority</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-keyslot.html#gab93f7432ec41bfa47be333a78e505600">crypt_keyslot_get_priority</a> (struct crypt_device *cd, int keyslot)</td></tr>
<tr class="separator:gab93f7432ec41bfa47be333a78e505600"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga91e4e11f83ba69ccf80de0ee30c67a3a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-keyslot.html#ga91e4e11f83ba69ccf80de0ee30c67a3a">crypt_keyslot_set_priority</a> (struct crypt_device *cd, int keyslot, <a class="el" href="group__crypt-keyslot.html#ga4120ee621158e2a71b35bb7abb4c04f4">crypt_keyslot_priority</a> priority)</td></tr>
<tr class="separator:ga91e4e11f83ba69ccf80de0ee30c67a3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf4ab92559b609c3aa7a34a2f3e22bee2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-keyslot.html#gaf4ab92559b609c3aa7a34a2f3e22bee2">crypt_keyslot_max</a> (const char *type)</td></tr>
<tr class="separator:gaf4ab92559b609c3aa7a34a2f3e22bee2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga24447cf39e825b753b8b00c999b3af79"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-keyslot.html#ga24447cf39e825b753b8b00c999b3af79">crypt_keyslot_area</a> (struct crypt_device *cd, int keyslot, uint64_t *offset, uint64_t *length)</td></tr>
<tr class="separator:ga24447cf39e825b753b8b00c999b3af79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafbb2368d0aadf9da326121a7da922f75"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-keyslot.html#gafbb2368d0aadf9da326121a7da922f75">crypt_keyslot_get_key_size</a> (struct crypt_device *cd, int keyslot)</td></tr>
<tr class="separator:gafbb2368d0aadf9da326121a7da922f75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4b5c3287f1a2274fde757d5175957da1"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-keyslot.html#ga4b5c3287f1a2274fde757d5175957da1">crypt_keyslot_get_encryption</a> (struct crypt_device *cd, int keyslot, size_t *key_size)</td></tr>
<tr class="separator:ga4b5c3287f1a2274fde757d5175957da1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab23b24a061b06f59b8127fa08e4ba639"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-keyslot.html#gab23b24a061b06f59b8127fa08e4ba639">crypt_keyslot_get_pbkdf</a> (struct crypt_device *cd, int keyslot, struct <a class="el" href="structcrypt__pbkdf__type.html">crypt_pbkdf_type</a> *pbkdf)</td></tr>
<tr class="separator:gab23b24a061b06f59b8127fa08e4ba639"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga26f9b3d987c0deb07cae7aa7589bdea6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-keyslot.html#ga26f9b3d987c0deb07cae7aa7589bdea6">crypt_keyslot_set_encryption</a> (struct crypt_device *cd, const char *cipher, size_t key_size)</td></tr>
<tr class="separator:ga26f9b3d987c0deb07cae7aa7589bdea6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8e623a674d86295e683c804f5aaceb4d"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__crypt-keyslot.html#ga8e623a674d86295e683c804f5aaceb4d">crypt_get_dir</a> (void)</td></tr>
<tr class="separator:ga8e623a674d86295e683c804f5aaceb4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga2efb82bfa83f67465f1a48b5088b1560"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2efb82bfa83f67465f1a48b5088b1560">&#9670;&nbsp;</a></span>CRYPT_ANY_SLOT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CRYPT_ANY_SLOT&#160;&#160;&#160;-1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>iterate through all keyslots and find first one that fits </p>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="crypt_luks_usage_8c-example.html#a6">crypt_luks_usage.c</a>.</dd>
</dl>

</div>
</div>
<a id="ga8853fa1fb03acb704a54c25d3c5d39ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8853fa1fb03acb704a54c25d3c5d39ac">&#9670;&nbsp;</a></span>CRYPT_VOLUME_KEY_DIGEST_REUSE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CRYPT_VOLUME_KEY_DIGEST_REUSE&#160;&#160;&#160;(1 &lt;&lt; 2)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Assign key to first matching digest before creating new digest </p>

</div>
</div>
<a id="ga8c5e6489cab9b08f6154180b92942cd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8c5e6489cab9b08f6154180b92942cd2">&#9670;&nbsp;</a></span>CRYPT_VOLUME_KEY_NO_SEGMENT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CRYPT_VOLUME_KEY_NO_SEGMENT&#160;&#160;&#160;(1 &lt;&lt; 0)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>create keyslot with volume key not associated with current dm-crypt segment </p>

</div>
</div>
<a id="gaa61ba423c776f46fb1b3c781aa0ca894"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa61ba423c776f46fb1b3c781aa0ca894">&#9670;&nbsp;</a></span>CRYPT_VOLUME_KEY_SET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CRYPT_VOLUME_KEY_SET&#160;&#160;&#160;(1 &lt;&lt; 1)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>create keyslot with new volume key and assign it to current dm-crypt segment </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga221981be3313db52394e109791712413"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga221981be3313db52394e109791712413">&#9670;&nbsp;</a></span>crypt_keyslot_info</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__crypt-keyslot.html#ga221981be3313db52394e109791712413">crypt_keyslot_info</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Crypt keyslot info </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga221981be3313db52394e109791712413ad5ace06fec9367dca16135ee26530139"></a>CRYPT_SLOT_INVALID&#160;</td><td class="fielddoc"><p>invalid keyslot </p>
</td></tr>
<tr><td class="fieldname"><a id="gga221981be3313db52394e109791712413a69fe7a1c99821e443b5ac6fc57951a49"></a>CRYPT_SLOT_INACTIVE&#160;</td><td class="fielddoc"><p>keyslot is inactive (free) </p>
</td></tr>
<tr><td class="fieldname"><a id="gga221981be3313db52394e109791712413a8539174069296cf91fa426cc39fea46d"></a>CRYPT_SLOT_ACTIVE&#160;</td><td class="fielddoc"><p>keyslot is active (used) </p>
</td></tr>
<tr><td class="fieldname"><a id="gga221981be3313db52394e109791712413a5e3cdf58ddae0ae6c3bb4a2b922c10e9"></a>CRYPT_SLOT_ACTIVE_LAST&#160;</td><td class="fielddoc"><p>keylost is active (used) and last used at the same time </p>
</td></tr>
<tr><td class="fieldname"><a id="gga221981be3313db52394e109791712413a13081257f1e3d7e7d4d69ff69f10fb91"></a>CRYPT_SLOT_UNBOUND&#160;</td><td class="fielddoc"><p>keyslot is active and not bound to any crypt segment (LUKS2 only) </p>
</td></tr>
</table>

</div>
</div>
<a id="ga4120ee621158e2a71b35bb7abb4c04f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4120ee621158e2a71b35bb7abb4c04f4">&#9670;&nbsp;</a></span>crypt_keyslot_priority</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__crypt-keyslot.html#ga4120ee621158e2a71b35bb7abb4c04f4">crypt_keyslot_priority</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Crypt keyslot priority </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga4120ee621158e2a71b35bb7abb4c04f4a4824d952fe22cb16af5381009f8f8be3"></a>CRYPT_SLOT_PRIORITY_INVALID&#160;</td><td class="fielddoc"><p>no such slot </p>
</td></tr>
<tr><td class="fieldname"><a id="gga4120ee621158e2a71b35bb7abb4c04f4a42f21b0055f07f2b99be2a35ffd4d5e2"></a>CRYPT_SLOT_PRIORITY_IGNORE&#160;</td><td class="fielddoc"><p>CRYPT_ANY_SLOT will ignore it for open </p>
</td></tr>
<tr><td class="fieldname"><a id="gga4120ee621158e2a71b35bb7abb4c04f4a83396ec0775fd14196643dd10f84e9cc"></a>CRYPT_SLOT_PRIORITY_NORMAL&#160;</td><td class="fielddoc"><p>default priority, tried after preferred </p>
</td></tr>
<tr><td class="fieldname"><a id="gga4120ee621158e2a71b35bb7abb4c04f4aa0eae88058df5bfcfa39fcd0adf0e970"></a>CRYPT_SLOT_PRIORITY_PREFER&#160;</td><td class="fielddoc"><p>will try to open first </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga8e623a674d86295e683c804f5aaceb4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8e623a674d86295e683c804f5aaceb4d">&#9670;&nbsp;</a></span>crypt_get_dir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* crypt_get_dir </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get directory where mapped crypt devices are created</p>
<dl class="section return"><dt>Returns</dt><dd>the directory path </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="crypt_luks_usage_8c-example.html#a14">crypt_luks_usage.c</a>.</dd>
</dl>

</div>
</div>
<a id="ga7917d5d136c114f6bcb1e26779a68cdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7917d5d136c114f6bcb1e26779a68cdf">&#9670;&nbsp;</a></span>crypt_keyslot_add_by_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crypt_keyslot_add_by_key </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keyslot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>volume_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>volume_key_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>passphrase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>passphrase_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add key slot using provided key.</p>
<dl class="section pre"><dt>Precondition</dt><dd><em>cd</em> contains initialized and formatted LUKS2 device context</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">keyslot</td><td>requested keyslot or CRYPT_ANY_SLOT </td></tr>
    <tr><td class="paramname">volume_key</td><td>provided volume key or <em>NULL</em> (see note below) </td></tr>
    <tr><td class="paramname">volume_key_size</td><td>size of volume_key </td></tr>
    <tr><td class="paramname">passphrase</td><td>passphrase for new keyslot </td></tr>
    <tr><td class="paramname">passphrase_size</td><td>size of passphrase </td></tr>
    <tr><td class="paramname">flags</td><td>key flags to set</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>allocated key slot number or negative errno otherwise.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>in case volume_key is <em>NULL</em> following first matching rule will apply: <ul>
<li>if cd is device handle used in <a class="el" href="group__crypt-actions.html#ga7ae085869e1bc17d9abde6cb3f588467">crypt_format()</a> by current process, the volume key generated (or passed) in <a class="el" href="group__crypt-actions.html#ga7ae085869e1bc17d9abde6cb3f588467">crypt_format()</a> will be stored in keyslot. </li>
<li>if CRYPT_VOLUME_KEY_NO_SEGMENT flag is raised the new volume_key will be generated and stored in keyslot. The keyslot will become unbound (unusable to dm-crypt device activation). </li>
<li>fails with -EINVAL otherwise</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>CRYPT_VOLUME_KEY_SET flag force updates volume key. It is <b>not</b> <b>reencryption!</b> By doing so you will most probably destroy your ciphertext data device. It's supposed to be used only in wrapped keys scheme for key refresh process where real (inner) volume key stays untouched. It may be involed on active <em>keyslot</em> which makes the (previously unbound) keyslot new regular keyslot. </dd></dl>

</div>
</div>
<a id="ga2dd31f95ddfc441e05543aee59e757ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2dd31f95ddfc441e05543aee59e757ab">&#9670;&nbsp;</a></span>crypt_keyslot_add_by_keyfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crypt_keyslot_add_by_keyfile </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keyslot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>keyfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>keyfile_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_keyfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>new_keyfile_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Backward compatible <a class="el" href="group__crypt-keyslot.html#ga70fe268497c1830d1df9b62ebe0e303a">crypt_keyslot_add_by_keyfile_device_offset()</a> (without offset). </p>

</div>
</div>
<a id="ga70fe268497c1830d1df9b62ebe0e303a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga70fe268497c1830d1df9b62ebe0e303a">&#9670;&nbsp;</a></span>crypt_keyslot_add_by_keyfile_device_offset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crypt_keyslot_add_by_keyfile_device_offset </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keyslot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>keyfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>keyfile_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>keyfile_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_keyfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>new_keyfile_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>new_keyfile_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add key slot using provided key file path.</p>
<dl class="section pre"><dt>Precondition</dt><dd><em>cd</em> contains initialized and formatted LUKS device context</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">keyslot</td><td>requested keyslot or <em>CRYPT_ANY_SLOT</em> </td></tr>
    <tr><td class="paramname">keyfile</td><td>key file used to unlock volume key </td></tr>
    <tr><td class="paramname">keyfile_size</td><td>number of bytes to read from keyfile, <em>0</em> is unlimited </td></tr>
    <tr><td class="paramname">keyfile_offset</td><td>number of bytes to skip at start of keyfile </td></tr>
    <tr><td class="paramname">new_keyfile</td><td>keyfile for new keyslot </td></tr>
    <tr><td class="paramname">new_keyfile_size</td><td>number of bytes to read from <em>new_keyfile</em>, <em>0</em> is unlimited </td></tr>
    <tr><td class="paramname">new_keyfile_offset</td><td>number of bytes to skip at start of new_keyfile</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>allocated key slot number or negative errno otherwise. </dd></dl>

</div>
</div>
<a id="ga930412caeb079e9fd763589da4a0b03b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga930412caeb079e9fd763589da4a0b03b">&#9670;&nbsp;</a></span>crypt_keyslot_add_by_keyfile_offset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crypt_keyslot_add_by_keyfile_offset </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keyslot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>keyfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>keyfile_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>keyfile_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_keyfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>new_keyfile_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>new_keyfile_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Backward compatible <a class="el" href="group__crypt-keyslot.html#ga70fe268497c1830d1df9b62ebe0e303a">crypt_keyslot_add_by_keyfile_device_offset()</a> (with size_t offset). </p>

</div>
</div>
<a id="ga50fd2497a256706db7a37f77b22e1ced"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga50fd2497a256706db7a37f77b22e1ced">&#9670;&nbsp;</a></span>crypt_keyslot_add_by_passphrase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crypt_keyslot_add_by_passphrase </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keyslot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>passphrase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>passphrase_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_passphrase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>new_passphrase_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add key slot using provided passphrase.</p>
<dl class="section pre"><dt>Precondition</dt><dd><em>cd</em> contains initialized and formatted LUKS device context</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">keyslot</td><td>requested keyslot or <em>CRYPT_ANY_SLOT</em> </td></tr>
    <tr><td class="paramname">passphrase</td><td>passphrase used to unlock volume key </td></tr>
    <tr><td class="paramname">passphrase_size</td><td>size of passphrase (binary data) </td></tr>
    <tr><td class="paramname">new_passphrase</td><td>passphrase for new keyslot </td></tr>
    <tr><td class="paramname">new_passphrase_size</td><td>size of <em>new_passphrase</em> (binary data)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>allocated key slot number or negative errno otherwise. </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="crypt_luks_usage_8c-example.html#a7">crypt_luks_usage.c</a>.</dd>
</dl>

</div>
</div>
<a id="ga93a404f2f6f6e88ccd82b6b02ccb9a84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga93a404f2f6f6e88ccd82b6b02ccb9a84">&#9670;&nbsp;</a></span>crypt_keyslot_add_by_volume_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crypt_keyslot_add_by_volume_key </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keyslot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>volume_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>volume_key_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>passphrase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>passphrase_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add key slot using provided volume key.</p>
<dl class="section pre"><dt>Precondition</dt><dd><em>cd</em> contains initialized and formatted LUKS device context</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">keyslot</td><td>requested keyslot or CRYPT_ANY_SLOT </td></tr>
    <tr><td class="paramname">volume_key</td><td>provided volume key or <em>NULL</em> if used after crypt_format </td></tr>
    <tr><td class="paramname">volume_key_size</td><td>size of volume_key </td></tr>
    <tr><td class="paramname">passphrase</td><td>passphrase for new keyslot </td></tr>
    <tr><td class="paramname">passphrase_size</td><td>size of passphrase</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>allocated key slot number or negative errno otherwise. </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="crypt_luks_usage_8c-example.html#a5">crypt_luks_usage.c</a>.</dd>
</dl>

</div>
</div>
<a id="ga24447cf39e825b753b8b00c999b3af79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga24447cf39e825b753b8b00c999b3af79">&#9670;&nbsp;</a></span>crypt_keyslot_area()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crypt_keyslot_area </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keyslot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get keyslot area pointers (relative to metadata device).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">keyslot</td><td>keyslot number </td></tr>
    <tr><td class="paramname">offset</td><td>offset on metadata device (in bytes) </td></tr>
    <tr><td class="paramname">length</td><td>length of keyslot area (in bytes)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><em>0</em> on success or negative errno value otherwise. </dd></dl>

</div>
</div>
<a id="ga5b57536bcdcec670e94cafd6b8a37620"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5b57536bcdcec670e94cafd6b8a37620">&#9670;&nbsp;</a></span>crypt_keyslot_change_by_passphrase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crypt_keyslot_change_by_passphrase </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keyslot_old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keyslot_new</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>passphrase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>passphrase_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>new_passphrase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>new_passphrase_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Change defined key slot using provided passphrase.</p>
<dl class="section pre"><dt>Precondition</dt><dd><em>cd</em> contains initialized and formatted LUKS device context</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">keyslot_old</td><td>old keyslot or <em>CRYPT_ANY_SLOT</em> </td></tr>
    <tr><td class="paramname">keyslot_new</td><td>new keyslot (can be the same as old) </td></tr>
    <tr><td class="paramname">passphrase</td><td>passphrase used to unlock volume key </td></tr>
    <tr><td class="paramname">passphrase_size</td><td>size of passphrase (binary data) </td></tr>
    <tr><td class="paramname">new_passphrase</td><td>passphrase for new keyslot </td></tr>
    <tr><td class="paramname">new_passphrase_size</td><td>size of <em>new_passphrase</em> (binary data)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>allocated key slot number or negative errno otherwise. </dd></dl>

</div>
</div>
<a id="ga95580f0491cb908e99e00b27cdc67a7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga95580f0491cb908e99e00b27cdc67a7b">&#9670;&nbsp;</a></span>crypt_keyslot_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crypt_keyslot_destroy </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keyslot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destroy (and disable) key slot.</p>
<dl class="section pre"><dt>Precondition</dt><dd><em>cd</em> contains initialized and formatted LUKS device context</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">keyslot</td><td>requested key slot to destroy</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><em>0</em> on success or negative errno value otherwise.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Note that there is no passphrase verification used. </dd></dl>

</div>
</div>
<a id="ga4b5c3287f1a2274fde757d5175957da1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4b5c3287f1a2274fde757d5175957da1">&#9670;&nbsp;</a></span>crypt_keyslot_get_encryption()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* crypt_keyslot_get_encryption </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keyslot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>key_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get cipher and key size for keyslot encryption. Use for LUKS2 keyslot to set different encryption type than for data encryption. Parameters will be used for next keyslot operations.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">keyslot</td><td>keyslot number of CRYPT_ANY_SLOT for default </td></tr>
    <tr><td class="paramname">key_size</td><td>encryption key size (in bytes)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>cipher specification on success or <em>NULL</em>.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This is the encryption of keyslot itself, not the data encryption algorithm! </dd></dl>

</div>
</div>
<a id="gafbb2368d0aadf9da326121a7da922f75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafbb2368d0aadf9da326121a7da922f75">&#9670;&nbsp;</a></span>crypt_keyslot_get_key_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crypt_keyslot_get_key_size </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keyslot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get size (in bytes) of stored key in particular keyslot. Use for LUKS2 unbound keyslots, for other keyslots it is the same as <a class="el" href="group__crypt-devstat.html#ga5bca43990bd61e223bbfb710ef880cff">crypt_get_volume_key_size</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">keyslot</td><td>keyslot number</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>volume key size or negative errno value otherwise. </dd></dl>

</div>
</div>
<a id="gab23b24a061b06f59b8127fa08e4ba639"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab23b24a061b06f59b8127fa08e4ba639">&#9670;&nbsp;</a></span>crypt_keyslot_get_pbkdf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crypt_keyslot_get_pbkdf </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keyslot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcrypt__pbkdf__type.html">crypt_pbkdf_type</a> *&#160;</td>
          <td class="paramname"><em>pbkdf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get PBKDF parameters for keyslot.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">keyslot</td><td>keyslot number </td></tr>
    <tr><td class="paramname">pbkdf</td><td>struct with returned PBKDF parameters</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><em>0</em> on success or negative errno value otherwise. </dd></dl>

</div>
</div>
<a id="gab93f7432ec41bfa47be333a78e505600"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab93f7432ec41bfa47be333a78e505600">&#9670;&nbsp;</a></span>crypt_keyslot_get_priority()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__crypt-keyslot.html#ga4120ee621158e2a71b35bb7abb4c04f4">crypt_keyslot_priority</a> crypt_keyslot_get_priority </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keyslot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get keyslot priority (LUKS2)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">keyslot</td><td>keyslot number</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>value defined by crypt_keyslot_priority </dd></dl>

</div>
</div>
<a id="gaf4ab92559b609c3aa7a34a2f3e22bee2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf4ab92559b609c3aa7a34a2f3e22bee2">&#9670;&nbsp;</a></span>crypt_keyslot_max()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crypt_keyslot_max </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get number of keyslots supported for device type.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>crypt device type</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>slot count or negative errno otherwise if device doesn't not support keyslots. </dd></dl>

</div>
</div>
<a id="ga26f9b3d987c0deb07cae7aa7589bdea6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga26f9b3d987c0deb07cae7aa7589bdea6">&#9670;&nbsp;</a></span>crypt_keyslot_set_encryption()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crypt_keyslot_set_encryption </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cipher</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>key_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set encryption for keyslot. Use for LUKS2 keyslot to set different encryption type than for data encryption. Parameters will be used for next keyslot operations that create or change a keyslot.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">cipher</td><td>(e.g. "aes-xts-plain64") </td></tr>
    <tr><td class="paramname">key_size</td><td>encryption key size (in bytes)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><em>0</em> on success or negative errno value otherwise.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>To reset to default keyslot encryption (the same as for data) set cipher to NULL and key size to 0. </dd></dl>

</div>
</div>
<a id="ga91e4e11f83ba69ccf80de0ee30c67a3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga91e4e11f83ba69ccf80de0ee30c67a3a">&#9670;&nbsp;</a></span>crypt_keyslot_set_priority()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crypt_keyslot_set_priority </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keyslot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__crypt-keyslot.html#ga4120ee621158e2a71b35bb7abb4c04f4">crypt_keyslot_priority</a>&#160;</td>
          <td class="paramname"><em>priority</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set keyslot priority (LUKS2)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">keyslot</td><td>keyslot number </td></tr>
    <tr><td class="paramname">priority</td><td>priority defined in crypt_keyslot_priority</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><em>0</em> on success or negative errno value otherwise. </dd></dl>

</div>
</div>
<a id="gae3e04f72fce2f1732628b9c018575ec8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae3e04f72fce2f1732628b9c018575ec8">&#9670;&nbsp;</a></span>crypt_keyslot_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__crypt-keyslot.html#ga221981be3313db52394e109791712413">crypt_keyslot_info</a> crypt_keyslot_status </td>
          <td>(</td>
          <td class="paramtype">struct crypt_device *&#160;</td>
          <td class="paramname"><em>cd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>keyslot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get information about particular key slot.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cd</td><td>crypt device handle </td></tr>
    <tr><td class="paramname">keyslot</td><td>requested keyslot to check or CRYPT_ANY_SLOT</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>value defined by crypt_keyslot_info </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jan 24 2022 15:30:42 for cryptsetup API by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
